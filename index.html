
<!DOCTYPE html>
<html>
<head>

	<meta charset="utf-8">

	<title>Lecture JSON</title>
	<link rel="stylesheet" type="text/css" href="CSS/liste.css">
	<script type="text/javascript" language="javascript" src="ifa_annuaire.json">
	</script>
</head>
<body>

	<h1> Liste promo IFA Developpeur Web - 2017</h1>


	<ul id="contenu">
    </ul>

	<script type="text/javascript">

		
		console.log("J'arrive");
		console.log(myJson);
		

		myJson.forEach( function(eleve) {
		    //creation de la div
		    var lienEleve = document.createElement("li");
		    lienEleve.classList.add("eleve");
		    // j'ajoute l'id de l'élève dans un attribut "data-eleve"
		    lienEleve.setAttribute("data-idEleve",eleve.id);

		    // pour chaque élève je crée un paragraphe
		    var pEleve = document.createElement("p");
		    // avec pour titre le nom de l'élève
		    var identiteEleve = document.createElement("h2");
		    identiteEleve.textContent = eleve.nom + " " + eleve.prenom;


		    
		    var boutonEleve = document.createElement("button");
		    boutonEleve.textContent  = "Détail";
		    boutonEleve.href="detail.html?id="+ eleve.id; 
		    
		    // Ajout d'un gestionnaire
		    boutonEleve.addEventListener("click", function (e) {
		    	window.location.replace("detail.html#"+eleve.id); 
		    		//eleve.nom + "&prenom"+eleve.prenom);
		    	
    			// alert("On me demande "+ eleve.id + "" + eleve.nom + " " + eleve.prenom  );
				

			});
		    
		    //creation des noeuds		    
		    pEleve.appendChild(identiteEleve);
		    pEleve.appendChild(boutonEleve);
		    
		    
		    // ajout du paragraphe Elève dans le DOM
			lienEleve.appendChild(pEleve);
		    document.getElementById("contenu").appendChild(lienEleve);
				    
		});

		</script>

</body>
</html>